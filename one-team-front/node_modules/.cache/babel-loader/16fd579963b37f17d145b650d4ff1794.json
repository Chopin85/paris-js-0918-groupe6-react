{"ast":null,"code":"import _classCallCheck from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/src/components/offerView/ModalOffer.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withStyles, createMuiTheme } from \"@material-ui/core/styles\";\nimport { MuiThemeProvider } from \"@material-ui/core/styles\";\nimport axios from \"axios\";\nimport { MakeCompletedUrl } from \"../../tools\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport { AwesomeButton } from \"react-awesome-button\";\nimport MuiDialogTitle from \"@material-ui/core/DialogTitle\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Paper from \"@material-ui/core/Paper\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport Typography from \"@material-ui/core/Typography\";\nimport OfferView from \"./OfferView\";\nimport { FULL } from \"./constants\";\nimport ModalConfimation from \"./ModalConfirmation\";\nvar DialogTitle = withStyles(function (theme) {\n  return {\n    root: {\n      // borderBottom: `1px solid ${theme.palette.divider}`,\n      margin: 0,\n      padding: theme.spacing.unit * 2\n    },\n    closeButton: {\n      position: \"absolute\",\n      right: theme.spacing.unit,\n      top: theme.spacing.unit,\n      color: theme.palette.grey[500]\n    }\n  };\n})(function (props) {\n  var children = props.children,\n      classes = props.classes,\n      onClose = props.onClose;\n  return React.createElement(MuiDialogTitle, {\n    disableTypography: true,\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    variant: \"h6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, children), onClose ? React.createElement(IconButton, {\n    \"aria-label\": \"Close\",\n    className: classes.closeButton,\n    onClick: onClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, React.createElement(CloseIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  })) : null);\n});\n\nvar ModalOffer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ModalOffer, _Component);\n\n  function ModalOffer() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ModalOffer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ModalOffer)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      open: false,\n      missionId: null,\n      openToConfirm: false\n    };\n\n    _this.handleClose = function () {\n      _this.setState({\n        open: false,\n        openToConfirm: false\n      });\n    };\n\n    _this.handleOpen = function () {\n      _this.setState({\n        open: true\n      });\n    };\n\n    _this.handleClickApplicate = function () {\n      var missionId = _this.state.missionId; //const { traineeId } = this.props;\n\n      var traineeId = sessionStorage.getItem(\"token\");\n\n      _this.setState({\n        open: false\n      });\n\n      axios.post(MakeCompletedUrl(\"application\"), {\n        missionId: missionId,\n        traineeId: traineeId\n      }).then(function (res) {\n        if (res.status === 200) _this.setState({\n          openToConfirm: true,\n          content: \"votre candidature a bien \\xE9t\\xE9 envoy\\xE9e\"\n        });\n      }).catch(function (error) {\n        if (error.response.status === 404) {\n          _this.setState({\n            openToConfirm: true,\n            content: \"Vous avez d\\xE9j\\xE0 posluter \\xE0 cette offre\"\n          });\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ModalOffer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var missionId = this.props.missionId;\n      this.setState({\n        missionId: missionId\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          open = _this$state.open,\n          content = _this$state.content,\n          openToConfirm = _this$state.openToConfirm;\n      var _this$props = this.props,\n          size = _this$props.size,\n          titleMission = _this$props.titleMission,\n          missionId = _this$props.missionId;\n\n      switch (size) {\n        case \"SMALL\":\n          {\n            return React.createElement(\"div\", {\n              className: \"ModalOffer application-item\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 107\n              },\n              __self: this\n            }, React.createElement(Paper, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 108\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              className: \"application-paper\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 109\n              },\n              __self: this\n            }, React.createElement(OfferView, Object.assign({\n              key: \"\".concat(missionId, \"-\").concat(titleMission)\n            }, this.props, {\n              size: size,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 110\n              },\n              __self: this\n            })), React.createElement(MuiThemeProvider, {\n              theme: theme,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 115\n              },\n              __self: this\n            }), React.createElement(Button, {\n              type: \"primary\",\n              variant: \"contained\",\n              onClick: this.handleOpen,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 116\n              },\n              __self: this\n            }, size === \"SMALL\" ? \"Consulter\" : \"En savoir plus\"))), React.createElement(Dialog, {\n              open: open,\n              \"aria-labelledby\": \"alert-dialog-title\",\n              \"aria-describedby\": \"alert-dialog-description\",\n              onClose: this.handleClose,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 126\n              },\n              __self: this\n            }, React.createElement(DialogTitle, {\n              id: \"customized-dialog-title\",\n              onClose: this.handleClose,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 132\n              },\n              __self: this\n            }), React.createElement(DialogContent, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 136\n              },\n              __self: this\n            }, React.createElement(DialogContentText, {\n              id: \"alert-dialog-description\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 137\n              },\n              __self: this\n            }, React.createElement(OfferView, Object.assign({\n              key: \"\".concat(missionId, \"-\").concat(titleMission)\n            }, this.props, {\n              size: FULL,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 138\n              },\n              __self: this\n            })))), React.createElement(DialogActions, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 145\n              },\n              __self: this\n            }, size === \"SMALL\" ? React.createElement(Button, {\n              disabled: true,\n              color: \"primary\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 147\n              },\n              __self: this\n            }, \"postuler\") : React.createElement(Button, {\n              onClick: this.handleClickApplicate,\n              color: \"primary\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 151\n              },\n              __self: this\n            }, \"postuler\"))), React.createElement(ModalConfimation, Object.assign({\n              openConfirmation: openToConfirm,\n              content: content,\n              close: this.handleClose\n            }, this.props, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 157\n              },\n              __self: this\n            })));\n          }\n\n        default:\n          return React.createElement(\"div\", {\n            className: \"ModalOffer\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 168\n            },\n            __self: this\n          }, React.createElement(OfferView, Object.assign({\n            key: \"\".concat(missionId, \"-\").concat(titleMission)\n          }, this.props, {\n            size: size,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 169\n            },\n            __self: this\n          })), React.createElement(AwesomeButton, {\n            type: \"primary\",\n            className: \"aws-btn remove\",\n            action: this.handleOpen,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 174\n            },\n            __self: this\n          }, size === \"SMALL\" ? \"Consulter\" : \"En savoir plus\"), React.createElement(Dialog, {\n            open: open,\n            \"aria-labelledby\": \"alert-dialog-title\",\n            \"aria-describedby\": \"alert-dialog-description\",\n            onClose: this.handleClose,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 183\n            },\n            __self: this\n          }, React.createElement(DialogTitle, {\n            id: \"customized-dialog-title\",\n            onClose: this.handleClose,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 189\n            },\n            __self: this\n          }), React.createElement(DialogContent, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 193\n            },\n            __self: this\n          }, React.createElement(DialogContentText, {\n            id: \"alert-dialog-description\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 194\n            },\n            __self: this\n          }, React.createElement(OfferView, Object.assign({\n            key: \"\".concat(missionId, \"-\").concat(titleMission)\n          }, this.props, {\n            size: FULL,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 195\n            },\n            __self: this\n          })))), React.createElement(DialogActions, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 202\n            },\n            __self: this\n          }, size === \"SMALL\" ? React.createElement(Button, {\n            disabled: true,\n            color: \"primary\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 204\n            },\n            __self: this\n          }, \"postuler\") : React.createElement(Button, {\n            onClick: this.handleClickApplicate,\n            color: \"primary\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 208\n            },\n            __self: this\n          }, \"postuler\"))), React.createElement(ModalConfimation, Object.assign({\n            openConfirmation: openToConfirm,\n            content: content,\n            close: this.handleClose\n          }, this.props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 214\n            },\n            __self: this\n          })));\n      }\n    }\n  }]);\n\n  return ModalOffer;\n}(Component);\n\nvar theme = createMuiTheme({\n  overrides: {\n    MuiToolbar: {\n      root: {\n        backgroundColor: \"#494642\"\n      }\n    }\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    traineeId: state.student.id\n  };\n};\n\nexport default connect(mapStateToProps)(ModalOffer);","map":{"version":3,"sources":["/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/src/components/offerView/ModalOffer.js"],"names":["React","Component","connect","withStyles","createMuiTheme","MuiThemeProvider","axios","MakeCompletedUrl","Button","Dialog","DialogActions","DialogContent","DialogContentText","AwesomeButton","MuiDialogTitle","IconButton","Paper","CloseIcon","Typography","OfferView","FULL","ModalConfimation","DialogTitle","theme","root","margin","padding","spacing","unit","closeButton","position","right","top","color","palette","grey","props","children","classes","onClose","ModalOffer","state","open","missionId","openToConfirm","handleClose","setState","handleOpen","handleClickApplicate","traineeId","sessionStorage","getItem","post","then","res","status","content","catch","error","response","size","titleMission","overrides","MuiToolbar","backgroundColor","mapStateToProps","student","id"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withStyles, createMuiTheme } from \"@material-ui/core/styles\";\nimport { MuiThemeProvider } from \"@material-ui/core/styles\";\nimport axios from \"axios\";\nimport { MakeCompletedUrl } from \"../../tools\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport { AwesomeButton } from \"react-awesome-button\";\nimport MuiDialogTitle from \"@material-ui/core/DialogTitle\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Paper from \"@material-ui/core/Paper\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport Typography from \"@material-ui/core/Typography\";\nimport OfferView from \"./OfferView\";\nimport { FULL } from \"./constants\";\nimport ModalConfimation from \"./ModalConfirmation\";\n\n\nconst DialogTitle = withStyles(theme => ({\n  root: {\n    // borderBottom: `1px solid ${theme.palette.divider}`,\n    margin: 0,\n    padding: theme.spacing.unit * 2\n  },\n  closeButton: {\n    position: \"absolute\",\n    right: theme.spacing.unit,\n    top: theme.spacing.unit,\n    color: theme.palette.grey[500]\n  }\n}))(props => {\n  const { children, classes, onClose } = props;\n  return (\n    <MuiDialogTitle disableTypography className={classes.root}>\n      <Typography variant=\"h6\">{children}</Typography>\n      {onClose ? (\n        <IconButton\n          aria-label=\"Close\"\n          className={classes.closeButton}\n          onClick={onClose}\n        >\n          <CloseIcon />\n        </IconButton>\n      ) : null}\n    </MuiDialogTitle>\n  );\n});\nclass ModalOffer extends Component {\n  state = {\n    open: false,\n    missionId: null,\n    openToConfirm: false\n  };\n\n  componentDidMount() {\n    const { missionId } = this.props;\n    this.setState({\n      missionId\n    });\n  }\n\n  handleClose = () => {\n    this.setState({ open: false, openToConfirm: false });\n  };\n\n  handleOpen = () => {\n    this.setState({ open: true });\n  };\n\n  handleClickApplicate = () => {\n    const { missionId } = this.state;\n    //const { traineeId } = this.props;\n    const traineeId = sessionStorage.getItem(\"token\");\n    this.setState({ open: false });\n    axios\n      .post(MakeCompletedUrl(\"application\"), {\n        missionId,\n        traineeId\n      })\n      .then(res => {\n        if (res.status === 200)\n          this.setState({\n            openToConfirm: true,\n            content: `votre candidature a bien été envoyée`\n          });\n      })\n      .catch(error => {\n        if (error.response.status === 404) {\n          this.setState({\n            openToConfirm: true,\n            content: `Vous avez déjà posluter à cette offre`\n          });\n        }\n      });\n  };\n\n  render() {\n    const { open, content, openToConfirm } = this.state;\n    const { size, titleMission, missionId } = this.props;\n    switch (size) {\n      case \"SMALL\": {\n        return (\n          <div className=\"ModalOffer application-item\">\n            <Paper>\n              <div className=\"application-paper\">\n                <OfferView\n                  key={`${missionId}-${titleMission}`}\n                  {...this.props}\n                  size={size}\n                />\n                <MuiThemeProvider theme={theme}></MuiThemeProvider>\n                <Button\n                  type=\"primary\"\n                  variant=\"contained\"\n                  onClick={this.handleOpen}\n                >\n                  {size === \"SMALL\" ? \"Consulter\" : \"En savoir plus\"}\n                </Button>\n              </div>\n            </Paper>\n            {/* //////////////////////////////////////////////////// */}\n            <Dialog\n              open={open}\n              aria-labelledby=\"alert-dialog-title\"\n              aria-describedby=\"alert-dialog-description\"\n              onClose={this.handleClose}\n            >\n              <DialogTitle\n                id=\"customized-dialog-title\"\n                onClose={this.handleClose}\n              />\n              <DialogContent>\n                <DialogContentText id=\"alert-dialog-description\">\n                  <OfferView\n                    key={`${missionId}-${titleMission}`}\n                    {...this.props}\n                    size={FULL}\n                  />\n                </DialogContentText>\n              </DialogContent>\n              <DialogActions>\n                {size === \"SMALL\" ? (\n                  <Button disabled color=\"primary\">\n                    postuler\n                  </Button>\n                ) : (\n                  <Button onClick={this.handleClickApplicate} color=\"primary\">\n                    postuler\n                  </Button>\n                )}\n              </DialogActions>\n            </Dialog>\n            <ModalConfimation\n              openConfirmation={openToConfirm}\n              content={content}\n              close={this.handleClose}\n              {...this.props}\n            />\n          </div>\n        );\n      }\n      default:\n        return (\n          <div className=\"ModalOffer\">\n            <OfferView\n              key={`${missionId}-${titleMission}`}\n              {...this.props}\n              size={size}\n            />\n            <AwesomeButton\n              type=\"primary\"\n              className=\"aws-btn remove\"\n              action={this.handleOpen}\n            >\n              {size === \"SMALL\" ? \"Consulter\" : \"En savoir plus\"}\n            </AwesomeButton>\n\n            {/* //////////////////////////////////////////////////// */}\n            <Dialog\n              open={open}\n              aria-labelledby=\"alert-dialog-title\"\n              aria-describedby=\"alert-dialog-description\"\n              onClose={this.handleClose}\n            >\n              <DialogTitle\n                id=\"customized-dialog-title\"\n                onClose={this.handleClose}\n              />\n              <DialogContent>\n                <DialogContentText id=\"alert-dialog-description\">\n                  <OfferView\n                    key={`${missionId}-${titleMission}`}\n                    {...this.props}\n                    size={FULL}\n                  />\n                </DialogContentText>\n              </DialogContent>\n              <DialogActions>\n                {size === \"SMALL\" ? (\n                  <Button disabled color=\"primary\">\n                    postuler\n                  </Button>\n                ) : (\n                  <Button onClick={this.handleClickApplicate} color=\"primary\">\n                    postuler\n                  </Button>\n                )}\n              </DialogActions>\n            </Dialog>\n            <ModalConfimation\n              openConfirmation={openToConfirm}\n              content={content}\n              close={this.handleClose}\n              {...this.props}\n            />\n          </div>\n        );\n    }\n  }\n}\n\nconst theme = createMuiTheme({\n  overrides: {\n    MuiToolbar: {\n      root: {\n        backgroundColor: \"#494642\"\n      }\n    }\n  }\n});\n\nconst mapStateToProps = state => ({\n  traineeId: state.student.id\n});\nexport default connect(mapStateToProps)(ModalOffer);\n"]},"metadata":{},"sourceType":"module"}