{"ast":null,"code":"import _defineProperty from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/src/components/traineeProfile/TraineeProfile.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport OutlinedInput from \"@material-ui/core/OutlinedInput\";\nimport Select from \"@material-ui/core/Select\";\nimport StudentView from \"../CompanyApplication/StudentView\";\nimport { FULL_RESTRICTED } from \"../CompanyApplication/studentConstant\";\nimport \"./traineeProfile.css\";\n\nvar TraineeProfile =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(TraineeProfile, _Component);\n\n  function TraineeProfile() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, TraineeProfile);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TraineeProfile)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      selectedFile: null\n    };\n\n    _this.handleChange = function (event) {\n      _this.setState(function (prevState) {\n        return {\n          data: _objectSpread({}, prevState.data, _defineProperty({}, event.target.name, event.target.value))\n        };\n      });\n    };\n\n    _this.onSubmit = function (e) {\n      // e.preventDefault();\n      // const { id } = this.state;\n      var id = sessionStorage.getItem(\"token\");\n      axios.put(\"http://localhost:3001/trainee/profile\", {\n        id: id,\n        firstname: e.target.firstname.value,\n        lastname: e.target.lastname.value,\n        phone: e.target.phone.value,\n        address: e.target.address.value,\n        town: e.target.town.value,\n        postalCode: e.target.postalCode.value,\n        school: e.target.school.value,\n        titre: e.target.titre.value,\n        description: e.target.description.value,\n        dateStart: e.target.dateStart.value,\n        dateEnd: e.target.dateEnd.value,\n        LevelStudyId: e.target.LevelStudyId.value\n      }).then(function (response) {\n        console.log(response);\n      }).catch(function (error) {\n        console.log(error.response);\n      });\n\n      _this.uploadPhoto();\n    };\n\n    _this.uploadPhoto = function () {\n      // e.preventDefault();\n      var selectedFile = _this.state;\n      var id = sessionStorage.getItem(\"token\");\n\n      if (selectedFile !== null) {\n        console.log(\"uploadphoto\", selectedFile);\n        var formData = new FormData();\n        formData.append(\"avatar\", selectedFile, selectedFile.name);\n        axios.post(\"http://localhost:3001/trainee/uploadphoto/\".concat(id), formData);\n      }\n    };\n\n    _this.fileChangedHandler = function (event) {\n      var fr = new FileReader();\n\n      fr.onload = function (a) {\n        _this.setState({\n          image: a.currentTarget.result\n        });\n      };\n\n      fr.readAsDataURL(document.querySelector('input[type=\"file\"]').files[0]);\n\n      _this.setState({\n        selectedFile: event.target.files[0]\n      }); // console.log(\"okkkkk\");\n\n    };\n\n    _this.date = function (data) {\n      var date = new Date(data);\n      var day = date.getDate();\n\n      if (day < 10) {\n        day = \"0\".concat(day);\n      }\n\n      var month = date.getMonth() + 1;\n\n      if (month < 10) {\n        month = \"0\".concat(month);\n      }\n\n      var year = date.getFullYear();\n      return \"\".concat(year, \"-\").concat(month, \"-\").concat(day);\n    };\n\n    return _this;\n  }\n\n  _createClass(TraineeProfile, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var id = sessionStorage.getItem(\"token\");\n      axios.get(\"http://localhost:3001/trainee/profile/\".concat(id)).then(function (response) {\n        console.log(response.data);\n\n        _this2.setState({\n          data: response.data\n        });\n      }).catch(function (error) {\n        console.log(error.response);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var data = this.state.data;\n\n      if (this.state.data == null) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, \"Loading\");\n      }\n\n      console.log(\"Profile\", this.state);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Compl\\xE8te ton profile\"), React.createElement(\"div\", {\n        className: \"createForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"file-input\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, this.state.data.pictures !== null ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: this.state.image || \"http://localhost:3001/\".concat(this.state.data.pictures),\n        width: \"100\",\n        height: \"100\",\n        alt: \" Profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      })) : React.createElement(\"img\", {\n        src: this.state.image || \"http://localhost:3001/public/photoProfile/PhotoProfil.jpg\",\n        width: \"100\",\n        height: \"100\",\n        alt: \" default Profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        id: \"file-input\",\n        type: \"file\",\n        accept: \".jpg, .png, .jpeg,|images/*\",\n        onChange: this.fileChangedHandler,\n        hidden: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      })), React.createElement(TextField, {\n        type: \"text\",\n        className: \"profileTextField\",\n        name: \"firstname\",\n        label: \"Pr\\xE9nom\",\n        defaultValue: data.firstname,\n        margin: \"normal\",\n        variant: \"outlined\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        type: \"text\",\n        className: \"profileTextField\",\n        name: \"lastname\",\n        label: \"Nom\",\n        defaultValue: data.lastname,\n        margin: \"normal\",\n        variant: \"outlined\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        disabled: true,\n        type: \"email\",\n        className: \"profileTextField\",\n        name: \"email\",\n        label: \"Email\",\n        defaultValue: data.email,\n        margin: \"normal\",\n        variant: \"outlined\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        type: \"text\",\n        className: \"profileTextField\",\n        name: \"phone\",\n        label: \"Phone\",\n        defaultValue: data.phone,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        type: \"text\",\n        className: \"profileTextField\",\n        name: \"address\",\n        label: \"Adress\",\n        defaultValue: data.address,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        type: \"text\",\n        className: \"profileTextField\",\n        name: \"town\",\n        label: \"Ville\",\n        defaultValue: data.town,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        type: \"text\",\n        className: \"profileTextField\",\n        name: \"postalCode\",\n        label: \"Postal Code\",\n        defaultValue: data.postalCode,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        type: \"text\",\n        className: \"profileTextField\",\n        name: \"school\",\n        label: \"\\xC9cole\",\n        defaultValue: data.school,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }), React.createElement(FormControl, {\n        className: \"profileTextField\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, \"Level\"), React.createElement(Select, {\n        value: this.state.data.LevelStudyId || \"\",\n        onChange: this.handleChange,\n        variant: \"outlined\",\n        inputProps: {\n          name: \"LevelStudyId\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(MenuItem, {\n        value: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, \"BAC+2\"), React.createElement(MenuItem, {\n        value: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, \"BAC+3\"), React.createElement(MenuItem, {\n        value: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, \"BAC+4\"), React.createElement(MenuItem, {\n        value: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, \"BAC+5\"))), React.createElement(TextField, {\n        type: \"text\",\n        className: \"profileTextField\",\n        name: \"titre\",\n        label: \"Intitul\\xE9 de stage\",\n        defaultValue: data.titre,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        type: \"text\",\n        multiline: true,\n        className: \"profileTextField\",\n        name: \"description\",\n        label: \"Descriptions\",\n        defaultValue: data.description,\n        margin: \"normal\",\n        variant: \"outlined\",\n        rows: \"5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"date\",\n        name: \"dateStart\",\n        label: \"Debut stage\",\n        type: \"date\",\n        defaultValue: this.state.data.dateStart !== null ? this.date(this.state.data.dateStart) : null,\n        InputLabelProps: {\n          shrink: true\n        },\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"date\",\n        name: \"dateEnd\",\n        label: \"Fin stage\",\n        type: \"date\",\n        defaultValue: this.state.data.dateEnd !== null ? this.date(this.state.data.dateEnd) : null,\n        InputLabelProps: {\n          shrink: true\n        },\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }), React.createElement(Button, {\n        variant: \"contained\",\n        className: \"buttonCreateForm\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, \"Enregistrer\"))), React.createElement(StudentView, {\n        firstname: data.firstname,\n        address: data.address,\n        postalCode: data.postalCode,\n        town: data.town,\n        pictures: data.pictures,\n        descriptionTrainee: data.description,\n        school: data.school,\n        titre: data.titre,\n        dateStart: data.dateStart,\n        dateEnd: data.dateEnd,\n        size: FULL_RESTRICTED,\n        LevelStudy: data.LevelStudy ? data.LevelStudy.label : null,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return TraineeProfile;\n}(Component);\n\nexport default TraineeProfile;","map":{"version":3,"sources":["/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/src/components/traineeProfile/TraineeProfile.js"],"names":["React","Component","axios","TextField","Button","InputLabel","MenuItem","FormControl","OutlinedInput","Select","StudentView","FULL_RESTRICTED","TraineeProfile","state","selectedFile","handleChange","event","setState","prevState","data","target","name","value","onSubmit","e","id","sessionStorage","getItem","put","firstname","lastname","phone","address","town","postalCode","school","titre","description","dateStart","dateEnd","LevelStudyId","then","response","console","log","catch","error","uploadPhoto","formData","FormData","append","post","fileChangedHandler","fr","FileReader","onload","a","image","currentTarget","result","readAsDataURL","document","querySelector","files","date","Date","day","getDate","month","getMonth","year","getFullYear","get","pictures","email","shrink","LevelStudy","label"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport OutlinedInput from \"@material-ui/core/OutlinedInput\";\nimport Select from \"@material-ui/core/Select\";\nimport StudentView from \"../CompanyApplication/StudentView\";\nimport { FULL_RESTRICTED } from \"../CompanyApplication/studentConstant\";\nimport \"./traineeProfile.css\";\n\nclass TraineeProfile extends Component {\n  state = {\n    selectedFile: null\n  };\n\n  componentDidMount() {\n    const id = sessionStorage.getItem(\"token\");\n    axios\n      .get(`http://localhost:3001/trainee/profile/${id}`)\n      .then(response => {\n        console.log(response.data);\n        this.setState({\n          data: response.data\n        });\n      })\n      .catch(error => {\n        console.log(error.response);\n      });\n  }\n\n  handleChange = event => {\n    this.setState(prevState => ({\n      data: {\n        ...prevState.data,\n        [event.target.name]: event.target.value\n      }\n    }));\n  };\n\n  onSubmit = e => {\n    // e.preventDefault();\n    // const { id } = this.state;\n    const id = sessionStorage.getItem(\"token\");\n    axios\n      .put(\"http://localhost:3001/trainee/profile\", {\n        id,\n        firstname: e.target.firstname.value,\n        lastname: e.target.lastname.value,\n        phone: e.target.phone.value,\n        address: e.target.address.value,\n        town: e.target.town.value,\n        postalCode: e.target.postalCode.value,\n        school: e.target.school.value,\n        titre: e.target.titre.value,\n        description: e.target.description.value,\n        dateStart: e.target.dateStart.value,\n        dateEnd: e.target.dateEnd.value,\n        LevelStudyId: e.target.LevelStudyId.value\n      })\n      .then(response => {\n        console.log(response);\n      })\n      .catch(error => {\n        console.log(error.response);\n      });\n    this.uploadPhoto();\n  };\n\n  uploadPhoto = () => {\n    // e.preventDefault();\n    const selectedFile = this.state;\n    const id = sessionStorage.getItem(\"token\");\n    if (selectedFile !== null) {\n      console.log(\"uploadphoto\", selectedFile);\n      const formData = new FormData();\n      formData.append(\"avatar\", selectedFile, selectedFile.name);\n      axios.post(`http://localhost:3001/trainee/uploadphoto/${id}`, formData);\n    }\n  };\n\n  fileChangedHandler = event => {\n    const fr = new FileReader();\n\n    fr.onload = a => {\n      this.setState({ image: a.currentTarget.result });\n    };\n    fr.readAsDataURL(document.querySelector('input[type=\"file\"]').files[0]);\n\n    this.setState({ selectedFile: event.target.files[0] });\n    // console.log(\"okkkkk\");\n  };\n\n  date = data => {\n    const date = new Date(data);\n    let day = date.getDate();\n    if (day < 10) {\n      day = `0${day}`;\n    }\n    let month = date.getMonth() + 1;\n    if (month < 10) {\n      month = `0${month}`;\n    }\n    const year = date.getFullYear();\n    return `${year}-${month}-${day}`;\n  };\n\n  render() {\n    const { data } = this.state;\n    if (this.state.data == null) {\n      return <div>Loading</div>;\n    }\n    console.log(\"Profile\", this.state);\n    return (\n      <div>\n        <h1>Complète ton profile</h1>\n        <div className=\"createForm\">\n          <form onSubmit={this.onSubmit}>\n            <div>\n              <label htmlFor=\"file-input\">\n                {this.state.data.pictures !== null ? (\n                  <div>\n                    <img\n                      src={\n                        this.state.image ||\n                        `http://localhost:3001/${this.state.data.pictures}`\n                      }\n                      width=\"100\"\n                      height=\"100\"\n                      alt=\" Profile\"\n                    />\n                  </div>\n                ) : (\n                  <img\n                    src={\n                      this.state.image ||\n                      \"http://localhost:3001/public/photoProfile/PhotoProfil.jpg\"\n                    }\n                    width=\"100\"\n                    height=\"100\"\n                    alt=\" default Profile\"\n                  />\n                )}\n              </label>\n              <input\n                id=\"file-input\"\n                type=\"file\"\n                accept=\".jpg, .png, .jpeg,|images/*\"\n                onChange={this.fileChangedHandler}\n                hidden\n              />\n            </div>\n            <TextField\n              type=\"text\"\n              className=\"profileTextField\"\n              name=\"firstname\"\n              label=\"Prénom\"\n              defaultValue={data.firstname}\n              margin=\"normal\"\n              variant=\"outlined\"\n              required\n            />\n            <TextField\n              type=\"text\"\n              className=\"profileTextField\"\n              name=\"lastname\"\n              label=\"Nom\"\n              defaultValue={data.lastname}\n              margin=\"normal\"\n              variant=\"outlined\"\n              required\n            />\n\n            <TextField\n              disabled\n              type=\"email\"\n              className=\"profileTextField\"\n              name=\"email\"\n              label=\"Email\"\n              defaultValue={data.email}\n              margin=\"normal\"\n              variant=\"outlined\"\n              required\n            />\n            <TextField\n              type=\"text\"\n              className=\"profileTextField\"\n              name=\"phone\"\n              label=\"Phone\"\n              defaultValue={data.phone}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n            <TextField\n              type=\"text\"\n              className=\"profileTextField\"\n              name=\"address\"\n              label=\"Adress\"\n              defaultValue={data.address}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n            <TextField\n              type=\"text\"\n              className=\"profileTextField\"\n              name=\"town\"\n              label=\"Ville\"\n              defaultValue={data.town}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n            <TextField\n              type=\"text\"\n              className=\"profileTextField\"\n              name=\"postalCode\"\n              label=\"Postal Code\"\n              defaultValue={data.postalCode}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n            <TextField\n              type=\"text\"\n              className=\"profileTextField\"\n              name=\"school\"\n              label=\"École\"\n              defaultValue={data.school}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n\n            <FormControl className=\"profileTextField\">\n              <InputLabel>Level</InputLabel>\n              <Select\n                value={this.state.data.LevelStudyId || \"\"}\n                onChange={this.handleChange}\n                variant=\"outlined\"\n                inputProps={{\n                  name: \"LevelStudyId\"\n                }}\n              >\n                <MenuItem value={1}>BAC+2</MenuItem>\n                <MenuItem value={2}>BAC+3</MenuItem>\n                <MenuItem value={3}>BAC+4</MenuItem>\n                <MenuItem value={4}>BAC+5</MenuItem>\n              </Select>\n            </FormControl>\n\n            <TextField\n              type=\"text\"\n              className=\"profileTextField\"\n              name=\"titre\"\n              label=\"Intitulé de stage\"\n              defaultValue={data.titre}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n            <TextField\n              type=\"text\"\n              multiline\n              className=\"profileTextField\"\n              name=\"description\"\n              label=\"Descriptions\"\n              defaultValue={data.description}\n              margin=\"normal\"\n              variant=\"outlined\"\n              rows=\"5\"\n            />\n            <TextField\n              id=\"date\"\n              name=\"dateStart\"\n              label=\"Debut stage\"\n              type=\"date\"\n              defaultValue={\n                this.state.data.dateStart !== null\n                  ? this.date(this.state.data.dateStart)\n                  : null\n              }\n              InputLabelProps={{\n                shrink: true\n              }}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n            <TextField\n              id=\"date\"\n              name=\"dateEnd\"\n              label=\"Fin stage\"\n              type=\"date\"\n              defaultValue={\n                this.state.data.dateEnd !== null\n                  ? this.date(this.state.data.dateEnd)\n                  : null\n              }\n              InputLabelProps={{\n                shrink: true\n              }}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n\n            <Button\n              variant=\"contained\"\n              className=\"buttonCreateForm\"\n              type=\"submit\"\n            >\n              {`Enregistrer`}\n            </Button>\n          </form>\n        </div>\n        <StudentView\n          firstname={data.firstname}\n          address={data.address}\n          postalCode={data.postalCode}\n          town={data.town}\n          pictures={data.pictures}\n          descriptionTrainee={data.description}\n          school={data.school}\n          titre={data.titre}\n          dateStart={data.dateStart}\n          dateEnd={data.dateEnd}\n          size={FULL_RESTRICTED}\n          LevelStudy={data.LevelStudy ? data.LevelStudy.label : null}\n        />\n      </div>\n    );\n  }\n}\n\nexport default TraineeProfile;\n"]},"metadata":{},"sourceType":"module"}