{"ast":null,"code":"import _objectSpread from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/src/components/searchOffer/FindOffer.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { withStyles, createMuiTheme, MuiThemeProvider } from \"@material-ui/core/styles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport ModalOffer from \"../offerView/ModalOffer\";\nimport { MIDDLE } from \"../offerView\";\nimport \"./searchOffers.css\";\n\nvar styles = function styles(theme) {\n  return {\n    buttonSearch: {\n      border: \"1px solid black\"\n    }\n  };\n};\n\nvar FindOffers =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(FindOffers, _Component);\n\n  function FindOffers() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, FindOffers);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(FindOffers)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      result: [],\n      search: \"\",\n      town: \"\",\n      isLoad: false\n    };\n\n    _this.handleChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n      var _this$state = _this.state,\n          search = _this$state.search,\n          town = _this$state.town;\n      var url = \"http://localhost:3001/mission?search=\".concat(search, \"&town=\").concat(town);\n      axios.get(url).then(function (res) {\n        _this.setState({\n          result: res.data\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(FindOffers, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var url = \"http://localhost:3001/mission/getcount\";\n      axios.get(url).then(function (res) {\n        console.log(\"res\", res);\n\n        _this2.setState(_objectSpread({}, _this2.state, {\n          count: res.data.count\n        }));\n      });\n      var _this$state2 = this.state,\n          search = _this$state2.search,\n          town = _this$state2.town;\n      var url2 = \"http://localhost:3001/mission?search=\".concat(search, \"&town=\").concat(town);\n      axios.get(url2).then(function (res) {\n        _this2.setState({\n          result: res.data\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state3 = this.state,\n          result = _this$state3.result,\n          count = _this$state3.count;\n      var classes = this.props.classes;\n      console.log(result);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, count || \"x\", \" stages pour votre recherche\"), React.createElement(\"form\", {\n        className: \"formSearch\",\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        variant: \"outlined\",\n        label: \"Mots clefs\",\n        margin: \"normal\",\n        name: \"search\",\n        id: \"search\",\n        type: \"search\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        variant: \"outlined\",\n        label: \"Ville\",\n        margin: \"normal\",\n        type: \"text\",\n        name: \"town\",\n        id: \"town\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), React.createElement(MuiThemeProvider, {\n        theme: theme,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"buttonSearch\",\n        variant: \"contained\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, \"Rechercher\"))), result.map(function (element) {\n        return React.createElement(ModalOffer, Object.assign({\n          size: MIDDLE,\n          key: \"\".concat(element.id, \"-\").concat(element.titleMission),\n          missionId: element.id,\n          titleMission: element.titleMission,\n          company: element.Company.companyName,\n          dateStart: element.dateStart,\n          dateEnd: element.dateEnd,\n          description: element.description,\n          intro: element.intro,\n          town: element.town,\n          LevelStudy: element.LevelStudy.label\n        }, _this3.props, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }));\n      }));\n    }\n  }]);\n\n  return FindOffers;\n}(Component);\n\nvar theme = createMuiTheme({\n  overrides: {\n    MuiButton: {\n      root: {\n        height: \"52px\",\n        marginTop: \"2px\"\n      }\n    }\n  }\n});\nexport default withStyles(styles)(FindOffers);","map":{"version":3,"sources":["/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/src/components/searchOffer/FindOffer.js"],"names":["React","Component","axios","withStyles","createMuiTheme","MuiThemeProvider","TextField","Button","ModalOffer","MIDDLE","styles","theme","buttonSearch","border","FindOffers","state","result","search","town","isLoad","handleChange","event","setState","target","name","value","handleSubmit","preventDefault","url","get","then","res","data","console","log","count","url2","classes","props","map","element","id","titleMission","Company","companyName","dateStart","dateEnd","description","intro","LevelStudy","label","overrides","MuiButton","root","height","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport {\n  withStyles,\n  createMuiTheme,\n  MuiThemeProvider\n} from \"@material-ui/core/styles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport ModalOffer from \"../offerView/ModalOffer\";\nimport { MIDDLE } from \"../offerView\";\nimport \"./searchOffers.css\";\n\nconst styles = theme => ({\n  buttonSearch: {\n    border: \"1px solid black\"\n  }\n});\n\nclass FindOffers extends Component {\n  state = {\n    result: [],\n    search: \"\",\n    town: \"\",\n    isLoad: false\n  };\n\n  componentDidMount() {\n    const url = \"http://localhost:3001/mission/getcount\";\n    axios.get(url).then(res => {\n      console.log(\"res\", res);\n      this.setState({ ...this.state, count: res.data.count });\n    });\n    const { search, town } = this.state;\n    const url2 = `http://localhost:3001/mission?search=${search}&town=${town}`;\n    axios.get(url2).then(res => {\n      this.setState({ result: res.data });\n    });\n  }\n\n  handleChange = event => {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    const { search, town } = this.state;\n    const url = `http://localhost:3001/mission?search=${search}&town=${town}`;\n    axios.get(url).then(res => {\n      this.setState({ result: res.data });\n    });\n  };\n\n  render() {\n    const { result, count } = this.state;\n    const { classes } = this.props;\n    console.log(result);\n    return (\n      <div>\n        <p>{count || \"x\"} stages pour votre recherche</p>\n        <form className=\"formSearch\" onSubmit={this.handleSubmit}>\n          <TextField\n            variant=\"outlined\"\n            label=\"Mots clefs\"\n            margin=\"normal\"\n            name=\"search\"\n            id=\"search\"\n            type=\"search\"\n            onChange={this.handleChange}\n          />\n          <TextField\n            variant=\"outlined\"\n            label=\"Ville\"\n            margin=\"normal\"\n            type=\"text\"\n            name=\"town\"\n            id=\"town\"\n            onChange={this.handleChange}\n          />\n          <MuiThemeProvider theme={theme}>\n            <Button className=\"buttonSearch\" variant=\"contained\" type=\"submit\">\n              Rechercher\n            </Button>\n          </MuiThemeProvider>\n        </form>\n        {result.map(element => (\n          <ModalOffer\n            size={MIDDLE}\n            key={`${element.id}-${element.titleMission}`}\n            missionId={element.id}\n            titleMission={element.titleMission}\n            company={element.Company.companyName}\n            dateStart={element.dateStart}\n            dateEnd={element.dateEnd}\n            description={element.description}\n            intro={element.intro}\n            town={element.town}\n            LevelStudy={element.LevelStudy.label}\n            {...this.props}\n          />\n        ))}\n      </div>\n    );\n  }\n}\n\nconst theme = createMuiTheme({\n  overrides: {\n    MuiButton: {\n      root: {\n        height: \"52px\",\n        marginTop: \"2px\"\n      }\n    }\n  }\n});\n\nexport default withStyles(styles)(FindOffers);\n"]},"metadata":{},"sourceType":"module"}