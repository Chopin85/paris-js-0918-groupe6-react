{"ast":null,"code":"import _objectWithoutProperties from \"/Users/paolo/Desktop/OnePoint/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"/Users/paolo/Desktop/OnePoint/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/paolo/Desktop/OnePoint/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/paolo/Desktop/OnePoint/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/paolo/Desktop/OnePoint/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/paolo/Desktop/OnePoint/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/paolo/Desktop/OnePoint/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/paolo/Desktop/OnePoint/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/paolo/Desktop/OnePoint/paris-js-0918-groupe6-react/one-team-front/src/components/companyOffers/CompanyCreateOffers/CompanyCreateOffers.js\";\nimport React from \"react\";\nimport \"./CompanyCreateOffers.css\";\nimport Axios from \"axios\";\nimport { MakeCompletedUrl, ConvertDate } from \"../../../tools\";\nimport { TextField, Select, MenuItem } from \"@material-ui/core\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nvar API_ENDPOINT_MISSION = MakeCompletedUrl(\"mission/\");\n\nvar CompanyCreateOffers =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CompanyCreateOffers, _React$Component);\n\n  function CompanyCreateOffers() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CompanyCreateOffers);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CompanyCreateOffers)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = _this.defaultState();\n\n    _this.handlerOnChange = function (event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n\n      _this.setState(function (previousState) {\n        return {\n          mission: _objectSpread({}, previousState.mission, _defineProperty({}, name, value))\n        };\n      });\n    };\n\n    _this.handlerOnChangeLevelStudy = function (event) {\n      var value = event.target.value;\n\n      _this.setState(function (previousState) {\n        return {\n          mission: _objectSpread({}, previousState.mission, {\n            LevelStudyId: value\n          })\n        };\n      });\n    };\n\n    _this.saveMission = function () {\n      var _this$state = _this.state,\n          mission = _this$state.mission,\n          isEditMode = _this$state.isEditMode;\n      var postFormMission = {\n        titleMission: mission.titleMission,\n        dateStart: mission.dateStart,\n        dateEnd: mission.dateEnd,\n        description: mission.description,\n        town: mission.town,\n        intro: mission.intro,\n        CompanyId: Number(mission.CompanyId),\n        LevelStudyId: Number(mission.LevelStudyId)\n      };\n\n      var levelStudy = _this.state.levelstudies.filter(function (level) {\n        return level.id == postFormMission.LevelStudyId;\n      })[0];\n\n      if (!isEditMode) {\n        Axios.post(API_ENDPOINT_MISSION, postFormMission).then(function (res) {\n          var handlerCreateMission = _this.props.handlerCreateMission;\n          res.data = _objectSpread({}, res.data, {\n            LevelStudy: levelStudy\n          });\n          handlerCreateMission(res.data);\n\n          _this.closeMission();\n        });\n      } else {\n        Axios.put(\"\".concat(API_ENDPOINT_MISSION).concat(mission.id), postFormMission).then(function (res) {\n          var handlerUpdateMission = _this.props.handlerUpdateMission;\n          res.data = _objectSpread({}, res.data, {\n            LevelStudy: levelStudy\n          });\n          handlerUpdateMission(res.data);\n\n          _this.closeMission();\n        });\n      }\n    };\n\n    _this.closeMission = function () {\n      var onClose = _this.props.onClose;\n\n      _this.setState(_this.defaultState(true));\n\n      onClose();\n    };\n\n    return _this;\n  }\n\n  _createClass(CompanyCreateOffers, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      Axios.get(MakeCompletedUrl(\"paradata/levelstudies\")).then(function (res) {\n        _this2.setState({\n          idLoaded: true,\n          levelstudies: res.data\n        });\n      });\n      var modifMission = this.props.modifMission; // console.log(\">>>CompanyCreateOffers\", modifMission);\n\n      if (modifMission && modifMission.id) {\n        this.setState({\n          mission: modifMission,\n          isEditMode: true\n        });\n      }\n    }\n  }, {\n    key: \"defaultState\",\n    value: function defaultState() {\n      var isLoaded = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var idCompany = sessionStorage.getItem(\"token\");\n      return {\n        mission: {\n          titleMission: \"\",\n          dateStart: new Date().toLocaleDateString(),\n          dateEnd: new Date().toLocaleDateString(),\n          description: \"\",\n          town: \"\",\n          intro: \"\",\n          CompanyId: idCompany,\n          LevelStudyId: 1\n        },\n        isEditMode: false,\n        idLoaded: isLoaded\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          mission = _this$state2.mission,\n          isEditMode = _this$state2.isEditMode,\n          idLoaded = _this$state2.idLoaded,\n          levelstudies = _this$state2.levelstudies;\n\n      var _this$props = this.props,\n          onClose = _this$props.onClose,\n          other = _objectWithoutProperties(_this$props, [\"onClose\"]);\n\n      return React.createElement(Dialog, Object.assign({\n        className: \"dialog\" // onClose={onClose}\n\n      }, other, {\n        fullWidth: true,\n        maxWidth: \"lg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), React.createElement(DialogTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, isEditMode ? \"Je modifie une mission\" : \"Je cr√©e une mission\"), React.createElement(\"div\", {\n        className: \"CompanyCreateOffers\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        placeholder: \"Titre de la mission de stage\",\n        name: \"titleMission\",\n        label: \"Titre de la Mission\",\n        value: mission.titleMission,\n        onChange: this.handlerOnChange,\n        required: true,\n        fullWidth: true,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"dateText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        placeholder: \"Date de d\\xE9but\",\n        label: \"Date de d\\xE9but\",\n        name: \"dateStart\",\n        type: \"date\",\n        value: mission.dateStart !== null ? ConvertDate(mission.dateStart) : null,\n        onChange: this.handlerOnChange,\n        required: true,\n        fullWidth: true,\n        margin: \"normal\",\n        variant: \"outlined\",\n        InputLabelProps: {\n          shrink: true\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"dateText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        placeholder: \"Date de fin\",\n        label: \"Date de fin\",\n        type: \"date\",\n        name: \"dateEnd\",\n        value: mission.dateEnd !== null ? ConvertDate(mission.dateEnd) : null,\n        onChange: this.handlerOnChange,\n        required: true,\n        fullWidth: true,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }))), React.createElement(TextField, {\n        placeholder: \"Ville\",\n        name: \"town\",\n        label: \"Ville\",\n        value: mission.town,\n        onChange: this.handlerOnChange,\n        required: true,\n        fullWidth: true,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        placeholder: \"Introduction\",\n        name: \"intro\",\n        label: \"Introduction\",\n        value: mission.intro,\n        onChange: this.handlerOnChange,\n        required: true,\n        fullWidth: true,\n        multiline: true,\n        rows: \"2\" // rowsMax=\"2\"\n        ,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        placeholder: \"Description\",\n        name: \"description\",\n        label: \"Description\",\n        value: mission.description,\n        onChange: this.handlerOnChange,\n        required: true,\n        fullWidth: true,\n        multiline: true,\n        rows: \"5\" // rowsMax=\"10\"\n        ,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }), React.createElement(Select, {\n        name: \"LevelStudyId\",\n        required: true,\n        value: mission.LevelStudyId,\n        onChange: this.handlerOnChangeLevelStudy,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, idLoaded ? levelstudies.map(function (element) {\n        return React.createElement(MenuItem, {\n          key: element.id,\n          value: element.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 224\n          },\n          __self: this\n        }, element.label);\n      }) : \"loading...\"))), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.closeMission,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, \"Annuler\"), React.createElement(Button, {\n        onClick: this.saveMission,\n        color: \"primary\",\n        autoFocus: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, isEditMode ? \"Modifier\" : \"Cr√©er\")));\n    }\n  }]);\n\n  return CompanyCreateOffers;\n}(React.Component);\n\nexport default CompanyCreateOffers;","map":{"version":3,"sources":["/Users/paolo/Desktop/OnePoint/paris-js-0918-groupe6-react/one-team-front/src/components/companyOffers/CompanyCreateOffers/CompanyCreateOffers.js"],"names":["React","Axios","MakeCompletedUrl","ConvertDate","TextField","Select","MenuItem","Button","Dialog","DialogActions","DialogTitle","API_ENDPOINT_MISSION","CompanyCreateOffers","state","defaultState","handlerOnChange","event","target","name","value","setState","previousState","mission","handlerOnChangeLevelStudy","LevelStudyId","saveMission","isEditMode","postFormMission","titleMission","dateStart","dateEnd","description","town","intro","CompanyId","Number","levelStudy","levelstudies","filter","level","id","post","then","res","handlerCreateMission","props","data","LevelStudy","closeMission","put","handlerUpdateMission","onClose","get","idLoaded","modifMission","isLoaded","idCompany","sessionStorage","getItem","Date","toLocaleDateString","other","shrink","map","element","label","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./CompanyCreateOffers.css\";\nimport Axios from \"axios\";\nimport { MakeCompletedUrl, ConvertDate } from \"../../../tools\";\nimport { TextField, Select, MenuItem } from \"@material-ui/core\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\n\nconst API_ENDPOINT_MISSION = MakeCompletedUrl(\"mission/\");\n\nconst CompanyCreateOffers = class extends React.Component {\n  state = this.defaultState();\n\n  componentDidMount() {\n    Axios.get(MakeCompletedUrl(\"paradata/levelstudies\")).then(res => {\n      this.setState({ idLoaded: true, levelstudies: res.data });\n    });\n    const { modifMission } = this.props;\n    // console.log(\">>>CompanyCreateOffers\", modifMission);\n    if (modifMission && modifMission.id) {\n      this.setState({ mission: modifMission, isEditMode: true });\n    }\n  }\n\n  handlerOnChange = event => {\n    const { name, value } = event.target;\n    this.setState(previousState => ({\n      mission: {\n        ...previousState.mission,\n        [name]: value\n      }\n    }));\n  };\n\n  handlerOnChangeLevelStudy = event => {\n    const { value } = event.target;\n    this.setState(previousState => ({\n      mission: {\n        ...previousState.mission,\n        LevelStudyId: value\n      }\n    }));\n  };\n\n  // handlerOnSubmit = event => {\n  //   event.preventDefault();\n  saveMission = () => {\n    const { mission, isEditMode } = this.state;\n    const postFormMission = {\n      titleMission: mission.titleMission,\n      dateStart: mission.dateStart,\n      dateEnd: mission.dateEnd,\n      description: mission.description,\n      town: mission.town,\n      intro: mission.intro,\n      CompanyId: Number(mission.CompanyId),\n      LevelStudyId: Number(mission.LevelStudyId)\n    };\n\n    const levelStudy = this.state.levelstudies.filter(\n      level => level.id == postFormMission.LevelStudyId\n    )[0];\n    if (!isEditMode) {\n      Axios.post(API_ENDPOINT_MISSION, postFormMission).then(res => {\n        const { handlerCreateMission } = this.props;\n        res.data = { ...res.data, LevelStudy: levelStudy };\n        handlerCreateMission(res.data);\n        this.closeMission();\n      });\n    } else {\n      Axios.put(`${API_ENDPOINT_MISSION}${mission.id}`, postFormMission).then(\n        res => {\n          const { handlerUpdateMission } = this.props;\n          res.data = { ...res.data, LevelStudy: levelStudy };\n          handlerUpdateMission(res.data);\n          this.closeMission();\n        }\n      );\n    }\n  };\n\n  defaultState(isLoaded = false) {\n    const idCompany = sessionStorage.getItem(\"token\");\n    return {\n      mission: {\n        titleMission: \"\",\n        dateStart: new Date().toLocaleDateString(),\n        dateEnd: new Date().toLocaleDateString(),\n        description: \"\",\n        town: \"\",\n        intro: \"\",\n        CompanyId: idCompany,\n        LevelStudyId: 1\n      },\n      isEditMode: false,\n      idLoaded: isLoaded\n    };\n  }\n\n  closeMission = () => {\n    const { onClose } = this.props;\n    this.setState(this.defaultState(true));\n    onClose();\n  };\n\n  render() {\n    const { mission, isEditMode, idLoaded, levelstudies } = this.state;\n    const { onClose, ...other } = this.props;\n    return (\n      <Dialog\n        className=\"dialog\"\n        // onClose={onClose}\n        {...other}\n        fullWidth\n        maxWidth=\"lg\"\n      >\n        <DialogTitle>\n          {isEditMode ? \"Je modifie une mission\" : \"Je cr√©e une mission\"}\n        </DialogTitle>\n        <div className=\"CompanyCreateOffers\">\n          <form className=\"container\">\n            <TextField\n              placeholder=\"Titre de la mission de stage\"\n              name=\"titleMission\"\n              label=\"Titre de la Mission\"\n              value={mission.titleMission}\n              onChange={this.handlerOnChange}\n              required\n              fullWidth\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n            <div className=\"date\">\n              <div className=\"dateText\">\n                <TextField\n                  placeholder=\"Date de d√©but\"\n                  label=\"Date de d√©but\"\n                  name=\"dateStart\"\n                  type=\"date\"\n                  value={\n                    mission.dateStart !== null\n                      ? ConvertDate(mission.dateStart)\n                      : null\n                  }\n                  onChange={this.handlerOnChange}\n                  required\n                  fullWidth\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  InputLabelProps={{\n                    shrink: true\n                  }}\n                />\n              </div>\n              <div className=\"dateText\">\n                <TextField\n                  placeholder=\"Date de fin\"\n                  label=\"Date de fin\"\n                  type=\"date\"\n                  name=\"dateEnd\"\n                  value={\n                    mission.dateEnd !== null\n                      ? ConvertDate(mission.dateEnd)\n                      : null\n                  }\n                  onChange={this.handlerOnChange}\n                  required\n                  fullWidth\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                />\n              </div>\n            </div>\n\n            <TextField\n              placeholder=\"Ville\"\n              name=\"town\"\n              label=\"Ville\"\n              value={mission.town}\n              onChange={this.handlerOnChange}\n              required\n              fullWidth\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n            <TextField\n              placeholder=\"Introduction\"\n              name=\"intro\"\n              label=\"Introduction\"\n              value={mission.intro}\n              onChange={this.handlerOnChange}\n              required\n              fullWidth\n              multiline\n              rows=\"2\"\n              // rowsMax=\"2\"\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n            <TextField\n              placeholder=\"Description\"\n              name=\"description\"\n              label=\"Description\"\n              value={mission.description}\n              onChange={this.handlerOnChange}\n              required\n              fullWidth\n              multiline\n              rows=\"5\"\n              // rowsMax=\"10\"\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n            <Select\n              name=\"LevelStudyId\"\n              required\n              value={mission.LevelStudyId}\n              onChange={this.handlerOnChangeLevelStudy}\n            >\n              {idLoaded\n                ? levelstudies.map(element => (\n                    <MenuItem key={element.id} value={element.id}>\n                      {element.label}\n                    </MenuItem>\n                  ))\n                : \"loading...\"}\n            </Select>\n          </form>\n        </div>\n        <DialogActions>\n          <Button onClick={this.closeMission} color=\"primary\">\n            Annuler\n          </Button>\n          <Button onClick={this.saveMission} color=\"primary\" autoFocus>\n            {isEditMode ? \"Modifier\" : \"Cr√©er\"}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n};\n\nexport default CompanyCreateOffers;\n"]},"metadata":{},"sourceType":"module"}