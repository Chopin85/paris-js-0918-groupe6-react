{"ast":null,"code":"import _objectSpread from \"/Users/paolo/Desktop/OneTeam/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/paolo/Desktop/OneTeam/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/paolo/Desktop/OneTeam/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/paolo/Desktop/OneTeam/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/paolo/Desktop/OneTeam/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/paolo/Desktop/OneTeam/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/paolo/Desktop/OneTeam/paris-js-0918-groupe6-react/one-team-front/src/components/companyOffers/CompanyOfferManage.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { MakeCompletedUrl } from \"../../tools\";\nimport { AwesomeButton } from \"react-awesome-button\";\nimport Button from \"@material-ui/core/Button\";\nimport \"./Button.css\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Hidden from \"@material-ui/core/Hidden\";\nimport CompanyCreateOffers from \"./CompanyCreateOffers/CompanyCreateOffers\";\nimport Team from \"./Team\";\nimport renderHTML from \"react-render-html\";\nimport ConfirmDialog from \"../Dialogs/ConfirmDialog\";\nvar idCompany = sessionStorage.getItem(\"token\");\n\nvar CompanyOfferManage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CompanyOfferManage, _Component);\n\n  function CompanyOfferManage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CompanyOfferManage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CompanyOfferManage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      show: false,\n      open: false,\n      title: \"\",\n      content: \"\",\n      button: \"\",\n      disabled: false\n    };\n\n    _this.deleteData = function () {\n      var idMission = _this.props.idMission;\n      var API_ENDPOINT_MISSION = MakeCompletedUrl(\"mission/\");\n      axios.delete(\"\".concat(API_ENDPOINT_MISSION).concat(idMission), _this.state).then(function (res) {\n        _this.props.handlerDeleteMission(idMission);\n      });\n    };\n\n    _this.showModal = function () {\n      _this.setState(_objectSpread({}, _this.state, {\n        show: !_this.state.show\n      }));\n    };\n\n    _this.validateMission = function () {\n      var idMission = _this.props.idMission;\n      var missionId = idMission;\n      var companyId = sessionStorage.getItem(\"token\");\n      axios.put(MakeCompletedUrl(\"mission/validate\"), {\n        missionId: missionId,\n        companyId: companyId\n      }).then(function (res) {\n        _this.setState({\n          open: true,\n          title: \"Validation r\\xE9ussie\",\n          content: \"Vous avez valid\\xE9 votre Team, OneTeam a r\\xE9ceptionn\\xE9 votre demande et va contacter votre \\xE9quipe pour l'entretien\",\n          button: \"Fermer\",\n          disabled: true\n        });\n      }).catch(function (error) {\n        if (error.response.status === 422) {\n          _this.setState({\n            open: true,\n            title: \"Validation refus\\xE9e\",\n            content: \"Votre team est incomplète, elle doit être de 3 étudiants minimum et de 5 étudiants maximum\",\n            button: \"Fermer\"\n          });\n        } else if (error.response.status === 404) {\n          _this.setState({\n            open: true,\n            title: \"Validation refus\\xE9e\",\n            content: \"Selectionnez des étudiants si vous souhaitez valider cette team !\",\n            button: \"Fermer\"\n          });\n        } else {\n          _this.setState({\n            open: true,\n            title: \"Validation refus\\xE9e\",\n            content: \"Une erreur s'est produite, veuillez recommencer\",\n            button: \"Fermer\"\n          });\n        }\n      });\n    };\n\n    _this.handleClose = function () {\n      _this.setState({\n        open: false\n      }); // console.log(\"close\");\n\n    };\n\n    return _this;\n  }\n\n  _createClass(CompanyOfferManage, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          titleMission = _this$props.titleMission,\n          dateStart = _this$props.dateStart,\n          dateEnd = _this$props.dateEnd,\n          description = _this$props.description,\n          modifMission = _this$props.modifMission,\n          intro = _this$props.intro,\n          isFull = _this$props.isFull,\n          town = _this$props.town,\n          LevelStudy = _this$props.LevelStudy;\n      var _this$state = this.state,\n          title = _this$state.title,\n          content = _this$state.content,\n          button = _this$state.button,\n          open = _this$state.open,\n          disabled = _this$state.disabled;\n      var descriptionToShow = description.substring(0, 300); // console.log(\"ma description \", description.substring(0, 20));\n      // console.log(\"FULL\", isFull);\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, titleMission), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, this.props.company.companyName), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, town, \" \"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, dateStart), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, dateEnd), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \" niveau d'\\xE9tude: \", LevelStudy, \" \"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, intro, \" \"), React.createElement(Hidden, {\n        xsDown: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"r\", renderHTML(\"\".concat(descriptionToShow, \" ...\"))))), React.createElement(Button // type=\"primary\"\n      // className=\"aws-btn edit\"\n      , {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: this.showModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Modifier\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }), React.createElement(ConfirmDialog, {\n        buttonCaption: \"Supprimer\",\n        dialogTitle: \"Confirmation\",\n        dialogQuestion: \"Voulez-vous supprimer cette offre?\",\n        handleOk: this.deleteData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }), React.createElement(CompanyCreateOffers, {\n        open: this.state.show,\n        onClose: this.showModal,\n        handlerUpdateMission: this.props.handlerUpdateMission,\n        modifMission: modifMission,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        align: \"center\",\n        width: \"50%\",\n        color: \"midnightblue\",\n        size: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }), React.createElement(Team, Object.assign({}, this.props, {\n        disabled: disabled,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      })), disabled || isFull ? React.createElement(Button, {\n        type: \"primary\",\n        disabled: true,\n        className: \"aws-btn validate\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, \"Valider ma team\") : React.createElement(Button, {\n        onClick: this.validateMission // type=\"primary\"\n        // className=\"aws-btn validate\"\n        ,\n        variant: \"contained\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, \"Valider ma team\"), React.createElement(\"hr\", {\n        align: \"center\",\n        width: \"90%\",\n        color: \"midnightblue\",\n        size: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }), React.createElement(Dialog, {\n        open: open,\n        onClose: this.handleClose,\n        \"aria-labelledby\": \"alert-dialog-title\",\n        \"aria-describedby\": \"alert-dialog-description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        id: \"alert-dialog-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, title), React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(DialogContentText, {\n        id: \"alert-dialog-description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, content)), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleClose,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, button))));\n    }\n  }]);\n\n  return CompanyOfferManage;\n}(Component);\n\nexport default CompanyOfferManage;","map":{"version":3,"sources":["/Users/paolo/Desktop/OneTeam/paris-js-0918-groupe6-react/one-team-front/src/components/companyOffers/CompanyOfferManage.js"],"names":["React","Component","axios","MakeCompletedUrl","AwesomeButton","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Hidden","CompanyCreateOffers","Team","renderHTML","ConfirmDialog","idCompany","sessionStorage","getItem","CompanyOfferManage","state","show","open","title","content","button","disabled","deleteData","idMission","props","API_ENDPOINT_MISSION","delete","then","res","handlerDeleteMission","showModal","setState","validateMission","missionId","companyId","put","catch","error","response","status","handleClose","titleMission","dateStart","dateEnd","description","modifMission","intro","isFull","town","LevelStudy","descriptionToShow","substring","company","companyName","handlerUpdateMission"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { MakeCompletedUrl } from \"../../tools\";\nimport { AwesomeButton } from \"react-awesome-button\";\nimport Button from \"@material-ui/core/Button\";\nimport \"./Button.css\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Hidden from \"@material-ui/core/Hidden\";\nimport CompanyCreateOffers from \"./CompanyCreateOffers/CompanyCreateOffers\";\nimport Team from \"./Team\";\nimport renderHTML from \"react-render-html\";\nimport ConfirmDialog from \"../Dialogs/ConfirmDialog\";\n\nconst idCompany = sessionStorage.getItem(\"token\");\n\nclass CompanyOfferManage extends Component {\n  state = {\n    show: false,\n    open: false,\n    title: ``,\n    content: ``,\n    button: ``,\n    disabled: false\n  };\n\n  deleteData = () => {\n    const { idMission } = this.props;\n    const API_ENDPOINT_MISSION = MakeCompletedUrl(\"mission/\");\n    axios\n      .delete(`${API_ENDPOINT_MISSION}${idMission}`, this.state)\n      .then(res => {\n        this.props.handlerDeleteMission(idMission);\n      });\n  };\n\n  showModal = () => {\n    this.setState({\n      ...this.state,\n      show: !this.state.show\n    });\n  };\n\n  validateMission = () => {\n    const { idMission } = this.props;\n    const missionId = idMission;\n    const companyId = sessionStorage.getItem(\"token\");\n    axios\n      .put(MakeCompletedUrl(`mission/validate`), {\n        missionId,\n        companyId\n      })\n      .then(res => {\n        this.setState({\n          open: true,\n          title: `Validation réussie`,\n          content: `Vous avez validé votre Team, OneTeam a réceptionné votre demande et va contacter votre équipe pour l'entretien`,\n          button: `Fermer`,\n          disabled: true\n        });\n      })\n      .catch(error => {\n        if (error.response.status === 422) {\n          this.setState({\n            open: true,\n            title: `Validation refusée`,\n            content:\n              \"Votre team est incomplète, elle doit être de 3 étudiants minimum et de 5 étudiants maximum\",\n            button: `Fermer`\n          });\n        } else if (error.response.status === 404) {\n          this.setState({\n            open: true,\n            title: `Validation refusée`,\n            content:\n              \"Selectionnez des étudiants si vous souhaitez valider cette team !\",\n            button: `Fermer`\n          });\n        } else {\n          this.setState({\n            open: true,\n            title: `Validation refusée`,\n            content: \"Une erreur s'est produite, veuillez recommencer\",\n            button: `Fermer`\n          });\n        }\n      });\n  };\n\n  handleClose = () => {\n    this.setState({ open: false });\n    // console.log(\"close\");\n  };\n\n  render() {\n    const {\n      titleMission,\n      dateStart,\n      dateEnd,\n      description,\n      modifMission,\n      intro,\n      isFull,\n      town,\n      LevelStudy\n    } = this.props;\n\n    const { title, content, button, open, disabled } = this.state;\n    const descriptionToShow = description.substring(0, 300);\n    // console.log(\"ma description \", description.substring(0, 20));\n\n    // console.log(\"FULL\", isFull);\n\n    return (\n      <div>\n        {/* ***** FICHE MISSION ***** */}\n        <div>\n          <h3>{titleMission}</h3>\n          <h4>{this.props.company.companyName}</h4>\n          <p>{town} </p>\n          <p>{dateStart}</p>\n          <p>{dateEnd}</p>\n          <p> niveau d'étude: {LevelStudy} </p>\n          <p>{intro} </p>\n          <Hidden xsDown>\n            <p>r{renderHTML(`${descriptionToShow} ...`)}</p>\n          </Hidden>\n        </div>\n        {/* ***** BOUTONS MODIF & SUPPRIMER MISSIONS ***** */}\n        <Button\n          // type=\"primary\"\n          // className=\"aws-btn edit\"\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={this.showModal}\n        >\n          Modifier\n        </Button>\n        <br />\n        {/* <Button\n          type=\"primary\"\n          className=\"aws-btn remove\"\n          variant=\"contained\"\n          color=\"secondary\"\n          onClick={this.deleteData}\n        >\n          Supprimer\n        </Button> */}\n        {/* <AwesomeButton\n          type=\"primary\"\n          className=\"aws-btn remove\"\n          action={this.deleteData}\n        >\n          Supprimer\n        </AwesomeButton> */}\n        <ConfirmDialog\n          buttonCaption=\"Supprimer\"\n          dialogTitle=\"Confirmation\"\n          dialogQuestion=\"Voulez-vous supprimer cette offre?\"\n          handleOk={this.deleteData}\n        />\n        <CompanyCreateOffers\n          open={this.state.show}\n          onClose={this.showModal}\n          handlerUpdateMission={this.props.handlerUpdateMission}\n          modifMission={modifMission}\n        />\n        <br />\n        <hr align=\"center\" width=\"50%\" color=\"midnightblue\" size=\"1\" />\n        {/* ****** ESPACE TEAM POUR L'ENTREPRISE ***** */}\n        <Team {...this.props} disabled={disabled} />\n        {disabled || isFull ? (\n          <Button type=\"primary\" disabled className=\"aws-btn validate\">\n            Valider ma team\n          </Button>\n        ) : (\n          <Button\n            onClick={this.validateMission}\n            // type=\"primary\"\n            // className=\"aws-btn validate\"\n            variant=\"contained\"\n            color=\"primary\"\n          >\n            Valider ma team\n          </Button>\n        )}\n        <hr align=\"center\" width=\"90%\" color=\"midnightblue\" size=\"1\" />\n        {/* **************** DIALOG VALIDATE ************************** */}\n        <Dialog\n          open={open}\n          onClose={this.handleClose}\n          aria-labelledby=\"alert-dialog-title\"\n          aria-describedby=\"alert-dialog-description\"\n        >\n          <DialogTitle id=\"alert-dialog-title\">{title}</DialogTitle>\n          <DialogContent>\n            <DialogContentText id=\"alert-dialog-description\">\n              {content}\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.handleClose} color=\"primary\">\n              {button}\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nexport default CompanyOfferManage;\n"]},"metadata":{},"sourceType":"module"}