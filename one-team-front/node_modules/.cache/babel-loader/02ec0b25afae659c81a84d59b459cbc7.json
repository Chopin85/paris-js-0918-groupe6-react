{"ast":null,"code":"import _classCallCheck from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/src/components/traineeProfile/TraineeProfile.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport StudentView from \"../CompanyApplication/StudentView\";\nimport { SMALL } from \"./studentConstant\";\nimport \"./traineeProfile.css\";\n\nvar TraineeProfile =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(TraineeProfile, _Component);\n\n  function TraineeProfile() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, TraineeProfile);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TraineeProfile)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {// image: \"\",\n      // lastname: \"\",\n      // firstname: \"\",\n      // email: \"\",\n      // pictures: \"\",\n      // phone: \"\",\n      // address: \"\",\n      // town: \"\",\n      // postalCode: \"\",\n      // selectedFile: null\n    };\n\n    _this.onSubmit = function (e) {\n      e.preventDefault(); // const { id } = this.state;\n\n      var id = sessionStorage.getItem(\"token\");\n      axios.put(\"http://localhost:3001/trainee/profile\", {\n        id: id,\n        firstname: e.target.firstname.value,\n        lastname: e.target.lastname.value,\n        phone: e.target.phone.value,\n        address: e.target.address.value,\n        town: e.target.town.value,\n        postalCode: e.target.postalCode.value\n      }).then(function (response) {\n        console.log(response);\n      }).catch(function (error) {\n        console.log(error.response);\n      });\n\n      _this.uploadPhoto();\n    };\n\n    _this.uploadPhoto = function () {\n      // e.preventDefault();\n      var id = sessionStorage.getItem(\"token\");\n      console.log(_this.state.selectedFile);\n      var formData = new FormData();\n      formData.append(\"avatar\", _this.state.selectedFile, _this.state.selectedFile.name);\n      axios.post(\"http://localhost:3001/trainee/uploadphoto/\".concat(id), formData);\n    };\n\n    _this.fileChangedHandler = function (event) {\n      var fr = new FileReader();\n\n      fr.onload = function (a) {\n        _this.setState({\n          image: a.currentTarget.result\n        });\n      };\n\n      fr.readAsDataURL(document.querySelector('input[type=\"file\"]').files[0]);\n\n      _this.setState({\n        selectedFile: event.target.files[0]\n      });\n\n      console.log(\"okkkkk\");\n    };\n\n    return _this;\n  }\n\n  _createClass(TraineeProfile, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var id = sessionStorage.getItem(\"token\");\n      axios.get(\"http://localhost:3001/trainee/profile/\", {\n        params: {\n          id: id\n        }\n      }).then(function (response) {\n        console.log(response);\n\n        _this2.setState({\n          data: response.data\n        });\n      }).catch(function (error) {\n        console.log(error.response);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log(this.state.data);\n      var data = this.state.data;\n\n      if (this.state.data == null) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, \"Loading\");\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"Compl\\xE8te ton profile\"), React.createElement(\"div\", {\n        className: \"createForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"file-input\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, this.state.data.pictures !== null ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: this.state.image || \"http://localhost:3001/\".concat(this.state.data.pictures),\n        width: \"100\",\n        height: \"100\",\n        alt: \" Profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      })) : React.createElement(\"img\", {\n        src: this.state.image || \"http://localhost:3001/public/photoProfile/PhotoProfil.jpg\",\n        width: \"100\",\n        height: \"100\",\n        alt: \" default Profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        id: \"file-input\",\n        type: \"file\",\n        onChange: this.fileChangedHandler,\n        hidden: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      })), React.createElement(TextField, {\n        type: \"text\",\n        className: \"textField\",\n        name: \"firstname\",\n        placeholder: \"Pr\\xE9nom\",\n        defaultValue: data.firstname,\n        margin: \"normal\",\n        variant: \"outlined\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        type: \"text\",\n        className: \"textField\",\n        name: \"lastname\",\n        placeholder: \"Nom\",\n        defaultValue: data.lastname,\n        margin: \"normal\",\n        variant: \"outlined\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        disabled: true,\n        type: \"email\",\n        className: \"textField\",\n        name: \"email\",\n        placeholder: \"Email\",\n        defaultValue: data.email,\n        margin: \"normal\",\n        variant: \"outlined\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        type: \"password\",\n        className: \"textField\",\n        name: \"password\",\n        placeholder: \"Mot de passe\",\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        type: \"text\",\n        className: \"textField\",\n        name: \"phone\",\n        placeholder: \"Phone\",\n        defaultValue: data.phone,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        type: \"text\",\n        className: \"textField\",\n        name: \"address\",\n        placeholder: \"Adress\",\n        defaultValue: data.address,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        type: \"text\",\n        className: \"textField\",\n        name: \"town\",\n        placeholder: \"Ville\",\n        defaultValue: data.town,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        type: \"text\",\n        className: \"textField\",\n        name: \"postalCode\",\n        placeholder: \"Postal Code\",\n        defaultValue: data.postalCode,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }), React.createElement(Button, {\n        variant: \"contained\",\n        className: \"buttonCreateForm\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, \"Enregistrer\"))), React.createElement(StudentView, {\n        firstname: data.firstname,\n        address: data.address,\n        postalCode: data.postalCode,\n        town: data.town,\n        size: FULL_RESTRICTED,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return TraineeProfile;\n}(Component);\n\nexport default TraineeProfile;","map":{"version":3,"sources":["/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/src/components/traineeProfile/TraineeProfile.js"],"names":["React","Component","axios","TextField","Button","StudentView","SMALL","TraineeProfile","state","onSubmit","e","preventDefault","id","sessionStorage","getItem","put","firstname","target","value","lastname","phone","address","town","postalCode","then","response","console","log","catch","error","uploadPhoto","selectedFile","formData","FormData","append","name","post","fileChangedHandler","event","fr","FileReader","onload","a","setState","image","currentTarget","result","readAsDataURL","document","querySelector","files","get","params","data","pictures","email","FULL_RESTRICTED"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport StudentView from \"../CompanyApplication/StudentView\";\nimport { SMALL } from \"./studentConstant\";\nimport \"./traineeProfile.css\";\n\nclass TraineeProfile extends Component {\n  state = {\n    // image: \"\",\n    // lastname: \"\",\n    // firstname: \"\",\n    // email: \"\",\n    // pictures: \"\",\n    // phone: \"\",\n    // address: \"\",\n    // town: \"\",\n    // postalCode: \"\",\n    // selectedFile: null\n  };\n\n  componentDidMount() {\n    const id = sessionStorage.getItem(\"token\");\n    axios\n      .get(`http://localhost:3001/trainee/profile/`, { params: { id } })\n      .then(response => {\n        console.log(response);\n        this.setState({\n          data: response.data\n        });\n      })\n      .catch(error => {\n        console.log(error.response);\n      });\n  }\n\n  onSubmit = e => {\n    e.preventDefault();\n    // const { id } = this.state;\n    const id = sessionStorage.getItem(\"token\");\n    axios\n      .put(\"http://localhost:3001/trainee/profile\", {\n        id,\n        firstname: e.target.firstname.value,\n        lastname: e.target.lastname.value,\n        phone: e.target.phone.value,\n        address: e.target.address.value,\n        town: e.target.town.value,\n        postalCode: e.target.postalCode.value\n      })\n      .then(response => {\n        console.log(response);\n      })\n      .catch(error => {\n        console.log(error.response);\n      });\n    this.uploadPhoto();\n  };\n\n  uploadPhoto = () => {\n    // e.preventDefault();\n    const id = sessionStorage.getItem(\"token\");\n    console.log(this.state.selectedFile);\n    const formData = new FormData();\n    formData.append(\n      \"avatar\",\n      this.state.selectedFile,\n      this.state.selectedFile.name\n    );\n    axios.post(`http://localhost:3001/trainee/uploadphoto/${id}`, formData);\n  };\n\n  fileChangedHandler = event => {\n    const fr = new FileReader();\n\n    fr.onload = a => {\n      this.setState({ image: a.currentTarget.result });\n    };\n    fr.readAsDataURL(document.querySelector('input[type=\"file\"]').files[0]);\n\n    this.setState({ selectedFile: event.target.files[0] });\n    console.log(\"okkkkk\");\n  };\n\n  render() {\n    console.log(this.state.data);\n    const { data } = this.state;\n    if (this.state.data == null) {\n      return <div>Loading</div>;\n    }\n    return (\n      <div>\n        <h1>Complète ton profile</h1>\n        <div className=\"createForm\">\n          <form onSubmit={this.onSubmit}>\n            <div>\n              <label for=\"file-input\">\n                {this.state.data.pictures !== null ? (\n                  <div>\n                    <img\n                      src={\n                        this.state.image ||\n                        `http://localhost:3001/${this.state.data.pictures}`\n                      }\n                      width=\"100\"\n                      height=\"100\"\n                      alt=\" Profile\"\n                    />\n                  </div>\n                ) : (\n                  <img\n                    src={\n                      this.state.image ||\n                      \"http://localhost:3001/public/photoProfile/PhotoProfil.jpg\"\n                    }\n                    width=\"100\"\n                    height=\"100\"\n                    alt=\" default Profile\"\n                  />\n                )}\n              </label>\n              <input\n                id=\"file-input\"\n                type=\"file\"\n                onChange={this.fileChangedHandler}\n                hidden\n              />\n            </div>\n            <TextField\n              type=\"text\"\n              className=\"textField\"\n              name=\"firstname\"\n              placeholder=\"Prénom\"\n              defaultValue={data.firstname}\n              margin=\"normal\"\n              variant=\"outlined\"\n              required\n            />\n            <TextField\n              type=\"text\"\n              className=\"textField\"\n              name=\"lastname\"\n              placeholder=\"Nom\"\n              defaultValue={data.lastname}\n              margin=\"normal\"\n              variant=\"outlined\"\n              required\n            />\n\n            <TextField\n              disabled\n              type=\"email\"\n              className=\"textField\"\n              name=\"email\"\n              placeholder=\"Email\"\n              defaultValue={data.email}\n              margin=\"normal\"\n              variant=\"outlined\"\n              required\n            />\n\n            <TextField\n              type=\"password\"\n              className=\"textField\"\n              name=\"password\"\n              placeholder=\"Mot de passe\"\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n            <TextField\n              type=\"text\"\n              className=\"textField\"\n              name=\"phone\"\n              placeholder=\"Phone\"\n              defaultValue={data.phone}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n            <TextField\n              type=\"text\"\n              className=\"textField\"\n              name=\"address\"\n              placeholder=\"Adress\"\n              defaultValue={data.address}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n            <TextField\n              type=\"text\"\n              className=\"textField\"\n              name=\"town\"\n              placeholder=\"Ville\"\n              defaultValue={data.town}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n            <TextField\n              type=\"text\"\n              className=\"textField\"\n              name=\"postalCode\"\n              placeholder=\"Postal Code\"\n              defaultValue={data.postalCode}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n            <Button\n              variant=\"contained\"\n              className=\"buttonCreateForm\"\n              type=\"submit\"\n            >\n              {`Enregistrer`}\n            </Button>\n          </form>\n        </div>\n        <StudentView\n          firstname={data.firstname}\n          address={data.address}\n          postalCode={data.postalCode}\n          town={data.town}\n          size={FULL_RESTRICTED}\n        />\n      </div>\n    );\n  }\n}\n\nexport default TraineeProfile;\n"]},"metadata":{},"sourceType":"module"}