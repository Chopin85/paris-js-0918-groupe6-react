{"ast":null,"code":"import _classCallCheck from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/src/components/traineeProfile/TraineeProfile.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport StudentView from \"../CompanyApplication/StudentView\";\nimport { FULL_RESTRICTED } from \"../CompanyApplication/studentConstant\";\nimport \"./traineeProfile.css\";\n\nvar TraineeProfile =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(TraineeProfile, _Component);\n\n  function TraineeProfile() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, TraineeProfile);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TraineeProfile)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      selectedFile: null\n    };\n\n    _this.onSubmit = function (e) {\n      // e.preventDefault();\n      // const { id } = this.state;\n      var id = sessionStorage.getItem(\"token\");\n      axios.put(\"http://localhost:3001/trainee/profile\", {\n        id: id,\n        firstname: e.target.firstname.value,\n        lastname: e.target.lastname.value,\n        phone: e.target.phone.value,\n        address: e.target.address.value,\n        town: e.target.town.value,\n        postalCode: e.target.postalCode.value,\n        description: e.target.description.value,\n        dateStart: e.target.dateStart.value,\n        dateEnd: e.target.dateEnd.value\n      }).then(function (response) {\n        console.log(response);\n      }).catch(function (error) {\n        console.log(error.response);\n      });\n\n      _this.uploadPhoto();\n    };\n\n    _this.uploadPhoto = function () {\n      // e.preventDefault();\n      var id = sessionStorage.getItem(\"token\");\n\n      if (_this.state.selectedFile !== null) {\n        console.log(\"uploadphoto\", _this.state.selectedFile);\n        var formData = new FormData();\n        formData.append(\"avatar\", _this.state.selectedFile, _this.state.selectedFile.name);\n        axios.post(\"http://localhost:3001/trainee/uploadphoto/\".concat(id), formData);\n      }\n    };\n\n    _this.fileChangedHandler = function (event) {\n      var fr = new FileReader();\n\n      fr.onload = function (a) {\n        _this.setState({\n          image: a.currentTarget.result\n        });\n      };\n\n      fr.readAsDataURL(document.querySelector('input[type=\"file\"]').files[0]);\n\n      _this.setState({\n        selectedFile: event.target.files[0]\n      });\n\n      console.log(\"okkkkk\");\n    };\n\n    return _this;\n  }\n\n  _createClass(TraineeProfile, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var id = sessionStorage.getItem(\"token\");\n      axios.get(\"http://localhost:3001/trainee/profile/\".concat(id)).then(function (response) {\n        console.log(response.data);\n\n        _this2.setState({\n          data: response.data\n        });\n      }).catch(function (error) {\n        console.log(error.response);\n      });\n    }\n  }, {\n    key: \"date\",\n    // date() {\n    //   const date = new Date();\n    //   let day = date.getDate();\n    //   if (day < 10) {\n    //     day = \"0\" + day;\n    //   }\n    //   let month = date.getMonth() + 1;\n    //   if (month < 10) {\n    //     month = \"0\" + month;\n    //   }\n    //   const year = date.getFullYear();\n    //   return `${year}-${month}-${day}`;\n    // }\n    value: function date(data) {\n      var date = new Date(data);\n      var day = date.getDate();\n\n      if (day < 10) {\n        day = \"0\" + day;\n      }\n\n      var month = date.getMonth() + 1;\n\n      if (month < 10) {\n        month = \"0\" + month;\n      }\n\n      var year = date.getFullYear();\n      return \"\".concat(year, \"-\").concat(month, \"-\").concat(day);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var data = this.state.data;\n\n      if (this.state.data == null) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, \"Loading\");\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Compl\\xE8te ton profile\"), React.createElement(\"div\", {\n        className: \"createForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"file-input\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, this.state.data.pictures !== null ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: this.state.image || \"http://localhost:3001/\".concat(this.state.data.pictures),\n        width: \"100\",\n        height: \"100\",\n        alt: \" Profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      })) : React.createElement(\"img\", {\n        src: this.state.image || \"http://localhost:3001/public/photoProfile/PhotoProfil.jpg\",\n        width: \"100\",\n        height: \"100\",\n        alt: \" default Profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        id: \"file-input\",\n        type: \"file\",\n        onChange: this.fileChangedHandler,\n        hidden: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      })), React.createElement(TextField, {\n        type: \"text\",\n        className: \"textField\",\n        name: \"firstname\",\n        placeholder: \"Pr\\xE9nom\",\n        defaultValue: data.firstname,\n        margin: \"normal\",\n        variant: \"outlined\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        type: \"text\",\n        className: \"textField\",\n        name: \"lastname\",\n        placeholder: \"Nom\",\n        defaultValue: data.lastname,\n        margin: \"normal\",\n        variant: \"outlined\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        disabled: true,\n        type: \"email\",\n        className: \"textField\",\n        name: \"email\",\n        placeholder: \"Email\",\n        defaultValue: data.email,\n        margin: \"normal\",\n        variant: \"outlined\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        type: \"text\",\n        className: \"textField\",\n        name: \"phone\",\n        placeholder: \"Phone\",\n        defaultValue: data.phone,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        type: \"text\",\n        className: \"textField\",\n        name: \"address\",\n        placeholder: \"Adress\",\n        defaultValue: data.address,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        type: \"text\",\n        className: \"textField\",\n        name: \"town\",\n        placeholder: \"Ville\",\n        defaultValue: data.town,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        type: \"text\",\n        className: \"textField\",\n        name: \"postalCode\",\n        placeholder: \"Postal Code\",\n        defaultValue: data.postalCode,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        type: \"text\",\n        multiline: true,\n        className: \"textField\",\n        name: \"description\",\n        placeholder: \"Descriptions\",\n        defaultValue: data.description,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"date\",\n        name: \"dateStart\",\n        label: \"Debut stage\",\n        type: \"date\",\n        defaultValue: this.state.data.dateStart !== null ? this.date(this.state.data.dateStart) : null,\n        InputLabelProps: {\n          shrink: true\n        },\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"date\",\n        name: \"dateEnd\",\n        label: \"Fin stage\",\n        type: \"date\",\n        defaultValue: this.state.data.dateEnd !== null ? this.date(this.state.data.dateEnd) : null,\n        InputLabelProps: {\n          shrink: true\n        },\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }), React.createElement(Button, {\n        variant: \"contained\",\n        className: \"buttonCreateForm\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, \"Enregistrer\"))), React.createElement(StudentView, {\n        firstname: data.firstname,\n        address: data.address,\n        postalCode: data.postalCode,\n        town: data.town,\n        pictures: \"http://localhost:3001/\".concat(data.pictures),\n        description: data.description,\n        school: data.school,\n        titre: data.titre,\n        size: FULL_RESTRICTED,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return TraineeProfile;\n}(Component);\n\nexport default TraineeProfile;","map":{"version":3,"sources":["/home/wilder/Documents/Projet3/Projet One team/paris-js-0918-groupe6-react/one-team-front/src/components/traineeProfile/TraineeProfile.js"],"names":["React","Component","axios","TextField","Button","StudentView","FULL_RESTRICTED","TraineeProfile","state","selectedFile","onSubmit","e","id","sessionStorage","getItem","put","firstname","target","value","lastname","phone","address","town","postalCode","description","dateStart","dateEnd","then","response","console","log","catch","error","uploadPhoto","formData","FormData","append","name","post","fileChangedHandler","event","fr","FileReader","onload","a","setState","image","currentTarget","result","readAsDataURL","document","querySelector","files","get","data","date","Date","day","getDate","month","getMonth","year","getFullYear","pictures","email","shrink","school","titre"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport StudentView from \"../CompanyApplication/StudentView\";\nimport { FULL_RESTRICTED } from \"../CompanyApplication/studentConstant\";\nimport \"./traineeProfile.css\";\n\nclass TraineeProfile extends Component {\n  state = {\n    selectedFile: null\n  };\n\n  componentDidMount() {\n    const id = sessionStorage.getItem(\"token\");\n    axios\n      .get(`http://localhost:3001/trainee/profile/${id}`)\n      .then(response => {\n        console.log(response.data);\n        this.setState({\n          data: response.data\n        });\n      })\n      .catch(error => {\n        console.log(error.response);\n      });\n  }\n\n  onSubmit = e => {\n    // e.preventDefault();\n    // const { id } = this.state;\n    const id = sessionStorage.getItem(\"token\");\n    axios\n      .put(\"http://localhost:3001/trainee/profile\", {\n        id,\n        firstname: e.target.firstname.value,\n        lastname: e.target.lastname.value,\n        phone: e.target.phone.value,\n        address: e.target.address.value,\n        town: e.target.town.value,\n        postalCode: e.target.postalCode.value,\n        description: e.target.description.value,\n        dateStart: e.target.dateStart.value,\n        dateEnd: e.target.dateEnd.value\n      })\n      .then(response => {\n        console.log(response);\n      })\n      .catch(error => {\n        console.log(error.response);\n      });\n    this.uploadPhoto();\n  };\n\n  uploadPhoto = () => {\n    // e.preventDefault();\n    const id = sessionStorage.getItem(\"token\");\n    if (this.state.selectedFile !== null) {\n      console.log(\"uploadphoto\", this.state.selectedFile);\n      const formData = new FormData();\n      formData.append(\n        \"avatar\",\n        this.state.selectedFile,\n        this.state.selectedFile.name\n      );\n      axios.post(`http://localhost:3001/trainee/uploadphoto/${id}`, formData);\n    }\n  };\n\n  fileChangedHandler = event => {\n    const fr = new FileReader();\n\n    fr.onload = a => {\n      this.setState({ image: a.currentTarget.result });\n    };\n    fr.readAsDataURL(document.querySelector('input[type=\"file\"]').files[0]);\n\n    this.setState({ selectedFile: event.target.files[0] });\n    console.log(\"okkkkk\");\n  };\n\n  // date() {\n  //   const date = new Date();\n  //   let day = date.getDate();\n  //   if (day < 10) {\n  //     day = \"0\" + day;\n  //   }\n  //   let month = date.getMonth() + 1;\n  //   if (month < 10) {\n  //     month = \"0\" + month;\n  //   }\n  //   const year = date.getFullYear();\n  //   return `${year}-${month}-${day}`;\n  // }\n\n  date(data) {\n    const date = new Date(data);\n    let day = date.getDate();\n    if (day < 10) {\n      day = \"0\" + day;\n    }\n    let month = date.getMonth() + 1;\n    if (month < 10) {\n      month = \"0\" + month;\n    }\n    const year = date.getFullYear();\n    return `${year}-${month}-${day}`;\n  }\n\n  render() {\n    const { data } = this.state;\n    if (this.state.data == null) {\n      return <div>Loading</div>;\n    }\n    return (\n      <div>\n        <h1>Complète ton profile</h1>\n        <div className=\"createForm\">\n          <form onSubmit={this.onSubmit}>\n            <div>\n              <label for=\"file-input\">\n                {this.state.data.pictures !== null ? (\n                  <div>\n                    <img\n                      src={\n                        this.state.image ||\n                        `http://localhost:3001/${this.state.data.pictures}`\n                      }\n                      width=\"100\"\n                      height=\"100\"\n                      alt=\" Profile\"\n                    />\n                  </div>\n                ) : (\n                  <img\n                    src={\n                      this.state.image ||\n                      \"http://localhost:3001/public/photoProfile/PhotoProfil.jpg\"\n                    }\n                    width=\"100\"\n                    height=\"100\"\n                    alt=\" default Profile\"\n                  />\n                )}\n              </label>\n              <input\n                id=\"file-input\"\n                type=\"file\"\n                onChange={this.fileChangedHandler}\n                hidden\n              />\n            </div>\n            <TextField\n              type=\"text\"\n              className=\"textField\"\n              name=\"firstname\"\n              placeholder=\"Prénom\"\n              defaultValue={data.firstname}\n              margin=\"normal\"\n              variant=\"outlined\"\n              required\n            />\n            <TextField\n              type=\"text\"\n              className=\"textField\"\n              name=\"lastname\"\n              placeholder=\"Nom\"\n              defaultValue={data.lastname}\n              margin=\"normal\"\n              variant=\"outlined\"\n              required\n            />\n\n            <TextField\n              disabled\n              type=\"email\"\n              className=\"textField\"\n              name=\"email\"\n              placeholder=\"Email\"\n              defaultValue={data.email}\n              margin=\"normal\"\n              variant=\"outlined\"\n              required\n            />\n            <TextField\n              type=\"text\"\n              className=\"textField\"\n              name=\"phone\"\n              placeholder=\"Phone\"\n              defaultValue={data.phone}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n            <TextField\n              type=\"text\"\n              className=\"textField\"\n              name=\"address\"\n              placeholder=\"Adress\"\n              defaultValue={data.address}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n            <TextField\n              type=\"text\"\n              className=\"textField\"\n              name=\"town\"\n              placeholder=\"Ville\"\n              defaultValue={data.town}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n            <TextField\n              type=\"text\"\n              className=\"textField\"\n              name=\"postalCode\"\n              placeholder=\"Postal Code\"\n              defaultValue={data.postalCode}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n            <TextField\n              type=\"text\"\n              multiline\n              className=\"textField\"\n              name=\"description\"\n              placeholder=\"Descriptions\"\n              defaultValue={data.description}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n            <TextField\n              id=\"date\"\n              name=\"dateStart\"\n              label=\"Debut stage\"\n              type=\"date\"\n              defaultValue={\n                this.state.data.dateStart !== null\n                  ? this.date(this.state.data.dateStart)\n                  : null\n              }\n              InputLabelProps={{\n                shrink: true\n              }}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n            <TextField\n              id=\"date\"\n              name=\"dateEnd\"\n              label=\"Fin stage\"\n              type=\"date\"\n              defaultValue={\n                this.state.data.dateEnd !== null\n                  ? this.date(this.state.data.dateEnd)\n                  : null\n              }\n              InputLabelProps={{\n                shrink: true\n              }}\n              margin=\"normal\"\n              variant=\"outlined\"\n            />\n\n            <Button\n              variant=\"contained\"\n              className=\"buttonCreateForm\"\n              type=\"submit\"\n            >\n              {`Enregistrer`}\n            </Button>\n          </form>\n        </div>\n        <StudentView\n          firstname={data.firstname}\n          address={data.address}\n          postalCode={data.postalCode}\n          town={data.town}\n          pictures={`http://localhost:3001/${data.pictures}`}\n          description={data.description}\n          school={data.school}\n          titre={data.titre}\n          \n          size={FULL_RESTRICTED}\n        />\n      </div>\n    );\n  }\n}\n\nexport default TraineeProfile;\n"]},"metadata":{},"sourceType":"module"}